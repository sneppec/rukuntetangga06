<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RT 06 — Login</title>
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
  <main class="container">
    <section class="card">
      <h1 class="center">Masuk</h1>
      <label for="email">Email</label>
      <input id="email" type="email" placeholder="nama@email.com" autocomplete="username"/>

      <label for="password">Password</label>
      <input id="password" type="password" placeholder="••••••••" autocomplete="current-password"/>

      <button id="btnLogin">Login</button>
      <p id="msg" class="center"></p>
    </section>
  </main>

  <script type="module">
    import { getApps, getApp, initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js";
    import { getDatabase } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";
    import { firebaseConfig } from "../js/firebase-config.example.js"; // ganti ke firebase-config.js setelah diisi

    const app = getApps().length ? getApp() : initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    const $ = (s)=>document.querySelector(s);
    const msg = $('#msg');
    $('#btnLogin').addEventListener('click', async ()=>{
      msg.textContent = 'Memproses…';
      try {
        const email = $('#email').value.trim();
        const password = $('#password').value;
        await signInWithEmailAndPassword(auth, email, password);
        msg.textContent = 'Login berhasil';
        location.href = '/';
      } catch (e) {
        msg.textContent = e.message;
      }
    });
  </script>
</body>
</html>
